# 如何将热电阻连接到S7-300PLC上并读取温度值？

## 1 硬件

### 1.1 接线

热电阻传感器输出模拟量信号，需使用S7-300PLC的模拟量输入模块读取测量值。

连执方式如图1所示，无论两线制、三线制还是四线制连接，每个热电阻都会占用两个模拟量输入通道（一个通道组），即有4根接到SM331模拟量模块的导线。而其它传感器一般只使用一个通道，连接2根导线。

![47CAB3CE-38C5-4FBC-B782-48CE29914B64](http://ttss.oss-cn-beijing.aliyuncs.com/2017-10-03-47CAB3CE-38C5-4FBC-B782-48CE29914B64.png)

图1 接线图和方框图

*注：可将未使用的通道（如CH0）短路或将其连接到额定范围内的电阻（如Pt100的100Ohm电阻）以禁用诊断。*

两线制连接时，测量值会包含导体的电阻，影响测量精度。而三线制与四线制连接时可降低线路电阻的影响。

三线制连接，需短接M+与Ic+，四线制连接时需短接M+、Ic+以及M-、Ic-。

其中 Ic+与Ic-给热电阻提供恒定的电流，是恒流源的两端，M+与M-用来测量热电阻两端的电压值。

### 1.2 量程卡

对接入热电阻的模拟量输入通道，需要旋转对应的程卡，使量程卡上的A指向使用的通道组（如CH0,1）的箭头方向。

![FBA27D11-E490-4B0C-958F-A939C57DF7FC](http://ttss.oss-cn-beijing.aliyuncs.com/2017-10-04-FBA27D11-E490-4B0C-958F-A939C57DF7FC.png)

## 2 软件

### 2.1 组态设定

还需要在组态软件中，选中使用模块，设定各模拟量通道组的输入类型。

### 2.2 读取数值

热电阻输入的信号是线性的，对于标准型（standard range）的Pt100热电阻，将检测值除以10即为温度值，对于气候型（climatic range）的Pt1000热电阻，温度值为测量值除以10。

除法操作，可以使用简单的除法指令，也可以使用FC105"scale"功能来实现。FC105可将整型输入转换成实数值，如Pt100的测量值为600（整数）经FC105转换后（除以10）为60.0(实数)摄氏度。





